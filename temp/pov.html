<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Realistic Anatomical Heartbeat</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: radial-gradient(circle at center, #1a0b0b 0%, #000000 100%);
            overflow: hidden;
            font-family: 'Courier New', Courier, monospace; /* Changed for a more "lab" feel */
        }

        .container {
            position: relative;
            width: 300px;
            height: 450px;
            filter: drop-shadow(0 0 20px rgba(255, 0, 0, 0.2));
            cursor: pointer; /* Indicates interaction */
        }

        /* The Heart SVG Container */
        .heart-svg {
            width: 100%;
            height: 100%;
            overflow: visible;
            /* The main heartbeat animation */
            animation: beat 1.2s infinite cubic-bezier(0.215, 0.61, 0.355, 1);
            transform-origin: center center;
        }

        /* Gradients and organic coloring */
        .tissue-base {
            fill: url(#tissueGradient);
        }
        
        .tissue-dark {
            fill: url(#darkTissueGradient);
        }

        .vein {
            fill: none;
            stroke: #3c1212;
            stroke-width: 2;
            opacity: 0.6;
            stroke-linecap: round;
        }

        .artery-highlight {
            fill: rgba(255, 255, 255, 0.1);
            filter: blur(2px);
        }

        /* Background Pulse Effect */
        .glow-bg {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 10px;
            height: 10px;
            border-radius: 50%;
            box-shadow: 0 0 100px 80px rgba(180, 0, 0, 0.1);
            animation: glow-pulse 1.2s infinite;
            z-index: -1;
        }

        /* Text Overlays */
        .text-overlay {
            position: absolute;
            width: 100%;
            text-align: center;
            color: #888;
            text-shadow: 0 2px 4px rgba(0,0,0,0.8);
            pointer-events: none;
        }

        .top-text {
            top: 20px;
            font-size: 1.5rem;
            color: #ff4444;
            font-weight: bold;
            letter-spacing: 1px;
            animation: flicker 4s infinite;
        }

        .bottom-text {
            bottom: 40px;
            font-size: 0.9rem;
            color: #aaa;
        }
        
        .sub-text {
            bottom: 20px;
            font-size: 0.75rem;
            color: #555;
            font-style: italic;
        }

        .start-prompt {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: rgba(255, 255, 255, 0.5);
            background: rgba(0, 0, 0, 0.6);
            padding: 10px 20px;
            border-radius: 20px;
            pointer-events: none;
            transition: opacity 0.5s;
            z-index: 10;
        }

        /* Animations */
        @keyframes beat {
            0% { transform: scale(1); }
            14% { transform: scale(1.03); } /* Lub */
            28% { transform: scale(1); }
            42% { transform: scale(1.03); } /* Dub */
            56% { transform: scale(1); } /* Pause */
            100% { transform: scale(1); }
        }

        @keyframes glow-pulse {
            0% { opacity: 0.3; transform: translate(-50%, -50%) scale(1); }
            14% { opacity: 0.6; transform: translate(-50%, -50%) scale(1.2); }
            28% { opacity: 0.3; transform: translate(-50%, -50%) scale(1); }
            42% { opacity: 0.5; transform: translate(-50%, -50%) scale(1.1); }
            100% { opacity: 0.3; transform: translate(-50%, -50%) scale(1); }
        }

        @keyframes flicker {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.8; }
            52% { opacity: 0.4; }
            54% { opacity: 0.8; }
        }

        /* Individual chamber movements */
        #left-ventricle {
            animation: squeeze-left 1.2s infinite;
            transform-origin: 60% 70%;
        }

        @keyframes squeeze-left {
            0%, 100% { transform: scale(1); }
            14% { transform: scale(0.98) translate(2px, -2px); }
            42% { transform: scale(0.99) translate(1px, -1px); }
        }

    </style>
</head>
<body onclick="startExperience()">

    <div class="glow-bg"></div>

    <div class="text-overlay top-text">POV: RESULT IN ONE DAY</div>

    <div class="container">
        <div id="prompt" class="start-prompt">Tap to Start Sound</div>

        <!-- Anatomical Heart SVG -->
        <svg class="heart-svg" viewBox="0 0 200 300" xmlns="http://www.w3.org/2000/svg">
            <defs>
                <radialGradient id="tissueGradient" cx="30%" cy="30%" r="90%" fx="40%" fy="30%">
                    <stop offset="0%" style="stop-color:#b92b27;stop-opacity:1" />
                    <stop offset="60%" style="stop-color:#700808;stop-opacity:1" />
                    <stop offset="100%" style="stop-color:#380202;stop-opacity:1" />
                </radialGradient>

                <linearGradient id="darkTissueGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                    <stop offset="0%" style="stop-color:#5e0b0b;stop-opacity:1" />
                    <stop offset="100%" style="stop-color:#240404;stop-opacity:1" />
                </linearGradient>

                <linearGradient id="shine" x1="0%" y1="0%" x2="0%" y2="100%">
                    <stop offset="0%" style="stop-color:rgba(255,255,255,0.4)" />
                    <stop offset="100%" style="stop-color:rgba(255,255,255,0)" />
                </linearGradient>
            </defs>

            <!-- Superior Vena Cava -->
            <path d="M70,40 C70,20 90,10 100,10 C110,10 130,20 130,50 L130,80 L70,80 Z" class="tissue-dark" />
            
            <!-- Aorta Arch -->
            <path d="M90,80 C90,40 120,0 160,30 C180,45 170,70 150,80" fill="none" stroke="#8a1c1c" stroke-width="25" stroke-linecap="round"/>

            <!-- Main Body -->
            <g id="main-body">
                <path id="left-ventricle" d="M100,80 
                         C150,80 190,120 180,200 
                         C170,260 120,290 100,295 
                         C80,290 30,260 20,200 
                         C10,120 50,80 100,80 Z" 
                      class="tissue-base" />
                <path d="M20,130 C10,130 0,150 10,180 C15,190 25,200 35,190" class="tissue-dark" style="opacity:0.8"/>
            </g>

            <!-- Veins -->
            <path d="M110,90 C100,130 90,180 100,250" class="vein" style="stroke-width:3; stroke:#500;" fill="none"/>
            <path d="M110,110 C130,140 150,160 160,180" class="vein" fill="none"/>
            <path d="M110,110 C90,140 60,160 50,180" class="vein" fill="none"/>
            
            <!-- Highlights -->
            <ellipse cx="140" cy="140" rx="20" ry="40" fill="url(#shine)" transform="rotate(-20 140 140)" opacity="0.4" filter="blur(5px)"/>
            <ellipse cx="60" cy="140" rx="15" ry="30" fill="url(#shine)" transform="rotate(20 60 140)" opacity="0.3" filter="blur(5px)"/>

            <!-- Pulmonary Artery -->
            <path d="M80,80 C80,60 60,50 50,50" fill="none" stroke="#701515" stroke-width="20" stroke-linecap="round"/>
        </svg>
    </div>

    <div class="text-overlay bottom-text">HEART OF PHYSICS STUDENTS</div>
    <div class="text-overlay sub-text">MADE BY DINGRA</div>

    <script>
        let audioCtx;
        let isStarted = false;

        function startExperience() {
            if (isStarted) return;
            isStarted = true;
            document.getElementById('prompt').style.opacity = '0';
            
            // Initialize Audio Context
            const AudioContext = window.AudioContext || window.webkitAudioContext;
            audioCtx = new AudioContext();

            // Start the rhythm loop
            playHeartbeat();
            setInterval(playHeartbeat, 1200); // 1.2s matches CSS animation
        }

        function createThump(time, frequency, duration, volume) {
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            
            // Use triangle wave for a muffled, organ-like thud
            osc.type = 'triangle'; 
            osc.frequency.value = frequency;

            // Envelope for the sound (Attack, Decay)
            gain.gain.setValueAtTime(0, time);
            gain.gain.linearRampToValueAtTime(volume, time + 0.05);
            gain.gain.exponentialRampToValueAtTime(0.001, time + duration);

            osc.connect(gain);
            gain.connect(audioCtx.destination); // Connect to filtered path if desired, simple destination here

            osc.start(time);
            osc.stop(time + duration);
        }

        function playHeartbeat() {
            if (!audioCtx) return;
            const now = audioCtx.currentTime;

            // Sound 1: "Lub" (Lower pitch, slightly longer)
            // Matches CSS 14% keyframe roughly (0.168s)
            createThump(now, 60, 0.15, 0.8);

            // Sound 2: "Dub" (Slightly higher pitch, sharper)
            // Matches CSS 42% keyframe roughly (0.504s)
            createThump(now + 0.35, 70, 0.12, 0.6);

            // Vibration API (Mobile only)
            // Pattern: Vibrate 50ms, wait 300ms, vibrate 50ms
            if (navigator.vibrate) {
                navigator.vibrate([50, 300, 50]);
            }
        }
    </script>
</body>
</html>
